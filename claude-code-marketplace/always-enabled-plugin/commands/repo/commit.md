---
allowed-tools: Bash(git add:*), Bash(git status:*), Bash(git commit:*)
description: Create a git commit following Conventional Commits
---

## Constraints

- Single logical change per commit
- Commit only when user explicitly requests
- Pre-commit hooks run automatically
- Hook failures: fix and create NEW commit (never amend unless HEAD created in this session)
- Never update git config
- Never destructive git commands (--force, hard reset, force push to main/master)
- Never skip hooks (--no-verify, --no-gpg-sign)
- Never `git status -uall` (memory issues on large repos)
- No assistant signatures/attribution/footers in commit messages

## Context

- Status: !`git status`
- Diff: !`git diff HEAD 2>/dev/null || git diff`
- Recent: !`git log --oneline -10 2>/dev/null || echo "No commits yet"`
- Branch: !`git branch --show-current`
- Arguments: #$ARGUMENTS

## Workflow

1. Run context commands
2. Stage files:
   - If Arguments is empty: `git add -A` (all changes)
   - If Arguments provided: `git add #$ARGUMENTS` (only specified files)
3. Commit with conventional format using HEREDOC:

```bash
git commit -m "$(cat <<'EOF'
<type>(<scope>): <summary>

Optional body explaining WHY.
EOF
)"
```

## Commit Format

Subject: `<type>(<scope>): <summary>`

- type âˆˆ {feat, fix, docs, refactor, test, chore, perf, ci, build, style}
- scope: component/module/feature (e.g., auth, api, ui)
- summary: lowercase verb, concise, specific

Body: optional, WHY only (non-obvious intent)

Forbidden in commit message:

- Assistant signatures (Co-Authored-By, Generated by, etc.)
- Agent names or tool identifiers

## Examples

Valid:

```
fix(search): prevent negative array index in search results

User input was not clamped, causing crashes on invalid queries.
```

Invalid:

```
Updated some files
add: user authentication
```

## Response

Return ONLY tool calls. No prose, markdown, or explanations.
